<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Things</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<ul id="thing-list" class="w-100">
    <li id="new-item" class="w-100">
        <div class="card mt-3 mx-4">
            <div class="card-body d-flex align-items-center">
                <form class="form input-group" role="form">
                    <input type="text" placeholder="Create a Thing" class="form-control">
                    <input type="submit" value="Create" class="btn btn-outline-primary">
                </form>
            </div>
        </div>
    </li>
</ul>

<body>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/80d83fd1c9.js" crossorigin="anonymous"></script>
    <script id="thing" type="text/html">
        <li id="thing{{id}}" class="w-100">
                <div class="card mt-3 mx-4">
                    <div class="card-body d-flex align-items-center">
                        <i class="btn far fa-{{done}}circle btn-toggle"></i>
                        {{subject}}
                        <i class="btn btn-outline-danger ml-auto btn-remove far fa-trash-alt prevent-default"></i>
                    </div>
                </div>
            </li>
    </script>
    <script type="text/javascript">
        $(function () {
            const data = [
                { id: 1, subject: "Hi", done: false },
                { id: 2, subject: "Jane", done: false },
                { id: 3, subject: "Jim", done: false },
                { id: 4, subject: "Julie", done: false },
                { id: 5, subject: "Joe", done: false },
                { id: 6, subject: "Jack", done: true }
            ];

            const spinnerClasses = 'fas fa-spinner fa-spin';
            const notDoneClasses = 'far fa-circle';
            const doneClasses = 'far fa-check-circle';
            const temp = $.trim($('#thing').html());

            $.each(data, function (index, obj) {
                let x = temp.replace(/{{id}}/ig, obj.id)
                    .replace(/{{subject}}/ig, obj.subject)
                    .replace(/{{done}}/ig, obj.done ? 'check-' : '');
                $(x).insertBefore('#new-item');
            });

            $('.prevent-default').on('click', (e) => e.preventDefault());

            $('.btn-remove').on('click', function (e) {
                e.preventDefault();
                btn = $(e.target);
                btn.removeClass('far fa-trash-alt').addClass(spinnerClasses); // Loading state

                // Callback
                btn.closest('li').remove();
            });

            $('.btn-toggle').on('click', function (e) {
                e.preventDefault();
                btn = $(e.target);
                const isDone = btn.hasClass(doneClasses);
                btn.removeClass(isDone ? doneClasses : notDoneClasses).addClass(spinnerClasses); // Loading state

                // Callback
                if (isDone) btn.removeClass(spinnerClasses).addClass(notDoneClasses);
                else btn.removeClass(spinnerClasses).addClass(doneClasses);
            });
        })
    </script>
</body>

</html>